(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(2),o=n.n(c),a=n(15),i=n.n(a),u=(n(21),n(6)),s=n(3),d=function(e){var t=e.handleFilterChange,n=e.filter;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{onChange:t,value:n})]})},j=function(e){var t=e.addPerson,n=e.handleNameChange,c=e.handleNumberChange,o=e.newName,a=e.newNumber;return Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsxs)("div",{children:["name:",Object(r.jsx)("input",{required:!0,onChange:n,value:o})]}),Object(r.jsxs)("div",{children:["number:",Object(r.jsx)("input",{required:!0,onChange:c,value:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var t=e.filteredNames,n=e.deletePerson;return Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Name"}),Object(r.jsx)("th",{children:"Number"}),Object(r.jsx)("th",{})]})}),Object(r.jsxs)("tbody",{children:[t.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.name}),Object(r.jsx)("td",{children:e.number}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{onClick:function(){return n(e.id)},children:"delete"})})]},e.name)})),Object(r.jsx)("tr",{children:Object(r.jsx)("td",{})})]})]})},b=n(4),h=n.n(b),f="/api/persons",m=function(){return h.a.get(f).then((function(e){return e.data}))},O=function(e){return h.a.post(f,e).then((function(e){return e.data}))},x=function(e,t){return h.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){return console.log(e),h.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},w=function(e){var t=e.message;return""===t.text?null:Object(r.jsx)("div",{className:t.error?"error":"add",children:t.text})},p=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)(""),i=Object(s.a)(a,2),b=i[0],h=i[1],f=Object(c.useState)(""),p=Object(s.a)(f,2),g=p[0],C=p[1],N=Object(c.useState)(""),S=Object(s.a)(N,2),k=S[0],L=S[1],y=Object(c.useState)({text:"",error:!1}),P=Object(s.a)(y,2),T=P[0],q=P[1];Object(c.useEffect)((function(){m().then((function(e){o(e)}))}),[]);var D=n.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(w,{message:T}),Object(r.jsx)(d,{handleFilterChange:function(e){L(e.target.value)},filter:k}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(j,{addPerson:function(e){if(e.preventDefault(),n.some((function(e){return e.name.toLowerCase()===b.toLowerCase()}))){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var t=n.find((function(e){return e.name.toLowerCase()===b.toLowerCase()})),r=Object(u.a)(Object(u.a)({},t),{},{number:g});x(r.id,r).then((function(e){o(n.map((function(t){return t.id!==r.id?t:e}))),q({text:"".concat(r.name," number was updated to ").concat(r.number),error:!1}),setTimeout((function(){q({text:"",error:!1})}),2500)})).catch((function(e){console.log(e)}))}}else O({name:b,number:g}).then((function(e){o(n.concat(e)),h(""),C(""),q({text:"".concat(e.name," number was added to phonebook"),error:!1}),setTimeout((function(){q({text:"",error:!1})}),2500)}))},handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){C(e.target.value)},newName:b,newNumber:g}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(l,{filteredNames:D,deletePerson:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name,"?"))&&v(e).then((function(){var r=n.filter((function(t){return t.id!==e}));o(r),q({text:"".concat(t.name,"'s contact info was deleted from the server."),error:!1}),setTimeout((function(){q({text:"",error:!1})}),2500),L("")})).catch((function(r){q({text:"".concat(t.name," has already been deleted!"),error:!0}),setTimeout((function(){q({text:"",error:!1})}),2500),o(n.filter((function(t){return t.id!==e})))}))}})]})};i.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(p,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.aa821079.chunk.js.map